MSG_NOT_FOUND="...not found"
MSG_PIL="-- picolisp"
MSG_CLJ="-- clojure"

echo "*** version"
echo $MSG_PIL
if command -v pil; then
  pil -version -bye
  PIL_EXE=pil
else
  echo $MSG_NOT_FOUND
fi
echo "-- python"
python --version
echo "-- go"
go version
echo "-- chicken"
csi -release
echo "-- ecl"
ecl --version
echo "-- clojure"
if command -v clojure; then
  clojure -e "(println (clojure-version))"
  CLJ_EXE=clojure
else
  echo $MSG_NOT_FOUND
fi

echo
echo "*** recursive"
if [ -v PIL_EXE ]; then
  echo $MSG_PIL
  $PIL_EXE recursive.l +
fi
echo "-- python"
python recursive.py
echo "-- go"
go run utils.go recursive.go
echo "-- chicken interpreted"
csi -q -b recursive.scm
echo "-- chicken compiled"
csc -O5 recursive.scm -o recursive.cs >/dev/null
./recursive.cs
echo "-- ecl interpreted"
ecl -norc -load recursive.lisp
echo "-- ecl compiled (fasl)"
ecl -norc -compile recursive.lisp >/dev/null
ecl -norc -load recursive.fas
echo "-- ecl compiled (exe)"
ecl -norc -load recursive-ecl-compile.lisp >/dev/null
./recursive.ecl
if [ -v CLJ_EXE ]; then
  echo $MSG_CLJ
  $CLJ_EXE recursive.clj
fi

echo
echo "*** recursive w/ cache"
if [ -v PIL_EXE ]; then
  echo $MSG_PIL
  $PIL_EXE recursive-cache.l +
fi
echo "-- python"
python recursive-cache.py

echo
echo "*** recursive (improved)"               
if [ -v PIL_EXE ]; then
  echo $MSG_PIL
  $PIL_EXE recursive-better.l +
fi
echo "-- python"                              
python recursive-better.py

echo
echo "*** iterative"
if [ -v PIL_EXE ]; then
  echo $MSG_PIL
  $PIL_EXE iterative.l +
fi
echo "-- python"
python iterative.py
echo "-- go"
go run utils.go iterative.go
echo "-- chicken interpreted"
csi -q -b iterative.scm
echo "-- chicken compiled"
csc -O5 iterative.scm -o iterative.cs >/dev/null
./iterative.cs
echo "-- ecl interpreted"
ecl -norc -load iterative.lisp
echo "-- ecl compiled (fasl)"
ecl -norc -compile iterative.lisp >/dev/null
ecl -norc -load iterative.fas
echo "-- ecl compiled (exe)"
ecl -norc -load iterative-ecl-compile.lisp >/dev/null
./iterative.ecl
if [ -v CLJ_EXE ]; then
  echo $MSG_CLJ
  $CLJ_EXE iterative.clj
fi
